# Make Targets Reference

## Overview

The Makefile provides convenient shortcuts for common development tasks. All targets support both full names and abbreviations for efficient workflow.

## üìã Complete Target Reference

### Training Targets

| Target | Abbreviation | Description | Architecture |
|--------|-------------|-------------|--------------|
| `make train` | `make t` | Train SimpleDenseNet (default) | Dense |
| `make train-sdn` | - | Train SimpleDenseNet (explicit) | Dense |
| `make train-cnn` | `make trc` | Train SimpleCNN | CNN |
| `make train-convnext-small` | `make trcns` | Train ConvNeXt-V2 Small (~73K) | ConvNeXt |
| `make train-convnext-medium` | `make trcnm` | Train ConvNeXt-V2 Medium (~288K) | ConvNeXt |
| `make train-convnext-large` | `make trcnl` | Train ConvNeXt-V2 Large (~725K) | ConvNeXt |

### Quick Testing Targets

| Target | Abbreviation | Description | Duration |
|--------|-------------|-------------|----------|
| `make train-quick` | `make tq` | Quick SimpleDenseNet test | 1 epoch, 10 batches |
| `make train-quick-cnn` | `make tqc` | Quick CNN test | 1 epoch, 10 batches |
| `make train-quick-convnext` | `make tqcn` | Quick ConvNeXt-V2 test | 1 epoch, 10 batches |
| `make train-quick-vit` | `make tqv` | Quick Vision Transformer test | 1 epoch, 10 batches |
| `make train-quick-all` | `make tqa` | Quick test all architectures | 1 epoch each |

### Architecture Comparison

| Target | Abbreviation | Description | Duration |
|--------|-------------|-------------|----------|
| `make compare-arch` | `make ca` | Side-by-side architecture comparison | 3 epochs each |

### Experiment Targets

| Target | Abbreviation | Description | Architecture |
|--------|-------------|-------------|--------------|
| `make example` | `make texample` | Run example experiment config | Dense |
| `make exp-vit` | `make evit` | Vision Transformer experiment | ViT |
| `make exp-convnext` | `make excn` | ConvNeXt-V2 experiment | ConvNeXt |
| `make exp-multihead-cnn-mnist` | `make emhcm` | Multihead CNN on MNIST | CNN |
| `make exp-multihead-cnn-cifar10` | `make emhcc10` | Multihead CNN on CIFAR-10 | CNN |

## üéØ CIFAR Benchmark Targets

### CIFAR-10 Benchmarks

| Target | Abbreviation | Description | Expected Accuracy |
|--------|-------------|-------------|------------------|
| `make cifar10-cnn` | `make cb10c` | CIFAR-10 CNN benchmark | 85-92% |
| `make cifar10-convnext` | `make cb10cn` | CIFAR-10 ConvNeXt benchmark | 90-95% |
| `make cifar10-vit` | `make cb10v` | CIFAR-10 ViT benchmark | 88-93% |
| `make cifar10-efficientnet` | `make cb10e` | CIFAR-10 EfficientNet benchmark | 89-94% |

### CIFAR-100 Benchmarks

| Target | Abbreviation | Description | Expected Accuracy |
|--------|-------------|-------------|------------------|
| `make cifar100-cnn` | `make cb100c` | CIFAR-100 CNN benchmark | 55-70% |
| `make cifar100-convnext` | `make cb100cn` | CIFAR-100 ConvNeXt benchmark | 70-80% |
| `make cifar100-coarse-cnn` | `make cb100cc` | CIFAR-100 coarse CNN benchmark | 75-85% |

### CIFAR Quick Tests

| Target | Abbreviation | Description | Duration |
|--------|-------------|-------------|----------|
| `make cifar10-quick-cnn` | `make cbq10c` | Quick CIFAR-10 CNN validation | 5 epochs |
| `make cifar10-quick-convnext` | `make cbq10cn` | Quick CIFAR-10 ConvNeXt validation | 5 epochs |
| `make cifar100-quick-cnn` | `make cbq100c` | Quick CIFAR-100 CNN validation | 5 epochs |
| `make cifar-quick-all` | `make cbqa` | All quick CIFAR validations | 5 epochs each |

### CIFAR Benchmark Suites

| Target | Abbreviation | Description | Scope |
|--------|-------------|-------------|-------|
| `make benchmark-cifar10` | `make cbs10` | All CIFAR-10 benchmarks | CIFAR-10 only |
| `make benchmark-cifar100` | `make cbs100` | All CIFAR-100 benchmarks | CIFAR-100 only |
| `make benchmark-suite` | `make cbs` | Automated CIFAR benchmark suite | Systematic |
| `make benchmark-all` | `make cbsa` | Complete CIFAR benchmark suite | Everything |

## üß™ Testing and Quality

| Target | Abbreviation | Description |
|--------|-------------|-------------|
| `make test` | `make t` | Run fast pytest tests |
| `make test-all` | `make ta` | Run all pytest tests |
| `make format` | `make f` | Run pre-commit hooks |

## üßπ Maintenance

| Target | Abbreviation | Description |
|--------|-------------|-------------|
| `make clean` | `make c` | Clean autogenerated files |
| `make clean-logs` | `make cl` | Clean logs directory |

## üîÑ Development

| Target | Abbreviation | Description |
|--------|-------------|-------------|
| `make sync` | `make s` | Merge changes from main branch |
| `make activate` | `make a` | Show activation alias setup |
| `make deactivate` | `make d` | Show deactivation alias setup |

## üìö Help and Information

| Target | Description |
|--------|-------------|
| `make help` | Display all available targets with descriptions |
| `make help \| grep exp` | List all experiment targets |
| `make help \| grep cifar` | List all CIFAR targets |

## üöÄ Common Workflows

### Quick Architecture Evaluation
```bash
# Test all architectures quickly
make tqa

# Compare architectures with same training time
make ca
```

### CIFAR Benchmarking
```bash
# Quick validation before full runs
make cbqa

# Full CIFAR-10 benchmark suite
make cbs10

# Complete systematic evaluation
make cbs
```

### Development Workflow
```bash
# Format code and run tests
make f && make t

# Clean and train
make c && make tq

# Full development cycle
make f && make t && make tq && make cb10c
```

### Research Experiments
```bash
# Run specific experiments
make evit        # ViT experiment
make emhcm       # Multihead experiment
make excn        # ConvNeXt experiment

# Compare with different seeds
make example
python src/train.py experiment=example seed=42
python src/train.py experiment=example seed=123
```

## üéØ Target Categories

### By Purpose
- **Training**: `train*`, `trc*`, `tq*`
- **Benchmarking**: `cb*`, `cbs*`
- **Experiments**: `e*`, `example`
- **Quality**: `test*`, `format`
- **Maintenance**: `clean*`, `sync`

### By Speed
- **Fast** (< 2 min): `tq*`, `cbq*`, `test`
- **Medium** (2-10 min): `train*`, `ca`
- **Slow** (> 10 min): `cb*`, `cbs*`

### By Architecture
- **Dense**: `train`, `tq`, `example`
- **CNN**: `trc*`, `tqc*`, `cb*c`
- **ConvNeXt**: `trcn*`, `tqcn*`, `cb*cn`
- **ViT**: `tqv*`, `evit`, `cb*v`
- **All**: `tqa`, `ca`, `cbs*`

## üí° Tips and Tricks

### Abbreviation Patterns
- **t** = train/test
- **q** = quick
- **c** = CNN or clean (context-dependent)
- **cn** = ConvNeXt
- **v** = ViT
- **e** = experiment
- **cb** = CIFAR benchmark
- **s** = suite/sync
- **a** = all/activate

### Chaining Commands
```bash
# Clean, format, test, then train
make c && make f && make t && make tq

# Quick validation then full benchmark
make cbq10c && make cb10c

# Format and test before committing
make f && make ta
```

### Hardware Optimization
Most targets automatically use the best available accelerator:
- **Mac**: MPS (Metal Performance Shaders)
- **Linux**: GPU (CUDA)
- **Fallback**: CPU

### Parallel Execution
For independent tasks, you can run multiple make targets in parallel:
```bash
# Run different quick tests in parallel (in separate terminals)
make tq &
make tqc &
make tqcn &
wait
```

## üîç Target Details

### Training Targets Implementation
```makefile
train:
	python src/train.py

train-cnn:
	python src/train.py model=mnist_cnn_421k

train-quick:
	python src/train.py trainer.max_epochs=1 trainer.limit_train_batches=10
```

### Benchmark Targets Implementation
```makefile
cifar10-cnn:
	python src/train.py experiment=cifar10_benchmark_cnn

benchmark-suite:
	python benchmarks/scripts/benchmark_cifar.py
```

### Quality Targets Implementation
```makefile
test:
	pytest -k "not slow"

format:
	pre-commit run -a
```

This comprehensive make target system provides efficient shortcuts for all common development and research tasks. Use `make help` to see all available targets with their descriptions.
